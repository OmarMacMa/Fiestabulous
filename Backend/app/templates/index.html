<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Party planner</title>
    <link href="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.13.4/datatables.min.css" rel="stylesheet"/>
    <script src="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.13.4/datatables.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.13.4/datatables.min.css" rel="stylesheet"/>
    <script src="https://cdn.datatables.net/v/dt/jq-3.6.0/dt-1.13.4/datatables.min.js"></script>
</head>
<body>
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-10">
                <h1>Party planner</h1>
                <table id="userTable" class="table table-striped table-bordered table-responsive" style="width:100%">
                    <thead class="table-dark">
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Passwort</th>
                        </tr>
                    </thead>
                    <tbody style="text-align: center;">
                        <script>
                            // Fetch to localhost:5000/user
                            fetch('http://localhost:5000/user')
                            .then(response => response.json())
                                .then(data => {
                                    $.each(data, function (key, value) {
                                        var row = $('<tr>');
                                        var nameCell = $('<td>').text(value.name);
                                        var emailCell = $('<td>').text(value.email);
                                        var passwordCell = $('<td>').text(value.password);
                                        row.append(nameCell, emailCell, passwordCell);
                                        $('#userTable tbody').append(row);
                                    });
                                    $('#userTable').DataTable();

                                })
                                .catch(error => console.log(error));
                            </script>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-10-lg">
                <h1 class="text-center">Parties list</h1>
                <section id="events">
                    <script>
                        // Fetch to localhost:5000/event
                        fetch('http://localhost:5000/event')
                            .then(response => response.json())
                            .then(data => {
                                console.log(data);
                                for (var key in data) {
                                    var name = data[key].name;
                                    var date = data[key].date;
                                    var location = data[key].location;
                                    var description = data[key].description;
                                    var organizer = data[key].organizer;
                                    
                                    var divcontainer = document.createElement("div");
                                    divcontainer.className = "container";

                                    var divrow = document.createElement("div");
                                    divrow.className = "row";
                                    divrow.style = "border: 1px solid black; margin: 10px; padding: 10px;";
                                    var divcol = document.createElement("div");
                                    divcol.className = "col-sm-5";
                                    divcol.style = "border: 1px solid black; margin: 10px; padding: 10px;";
                                    var divcol2 = document.createElement("div");
                                    divcol2.className = "col-sm-5";
                                    divcol2.style = "border: 1px solid black; margin: 10px; padding: 10px;";
                                    
                                    var h = document.createElement("h3");
                                    var p = document.createElement("p");
                                    var p2 = document.createElement("p");
                                    var p3 = document.createElement("p");
                                    var p4 = document.createElement("p");
                                    var iframe = document.createElement("iframe");
                                    h.innerHTML = name;
                                    p.innerHTML = date;
                                    p2.innerHTML = location;
                                    p3.innerHTML = description;
                                    p4.innerHTML = organizer;
                                    iframe.src = "https://maps.google.com/maps?" + location + "&output=embed";
                                    iframe.width = "300";
                                    iframe.height = "300";

                                    document.getElementById("events").appendChild(divcontainer);
                                    divcontainer.appendChild(divrow);
                                    divrow.appendChild(divcol);
                                    divrow.appendChild(divcol2);
                                    
                                    divcol.appendChild(h);
                                    divcol.appendChild(p);
                                    divcol.appendChild(p2);
                                    divcol.appendChild(p3);
                                    divcol.appendChild(p4);
                                    divcol2.appendChild(iframe);
                                }
                            })
                            .catch(error => console.log(error));
                    </script>
                </section>
            </div>
        </div>
    </div>
</body>
</html>